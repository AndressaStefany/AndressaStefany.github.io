<pre><span class="pre">#include &lt;iostream&gt;
#include &lt;opencv2/opencv.hpp&gt;
</span><span class="keyword">
using namespace</span> cv<span class="operator">;</span><span class="keyword">
using namespace</span> std<span class="operator">;</span><span class="type">

bool</span> confere<span class="operator">(</span><span class="type">int</span> width<span class="operator">,</span><span class="type"> int</span> height<span class="operator">,</span><span class="type"> int</span> x<span class="operator">,</span><span class="type"> int</span> y<span class="operator">){</span><span class="flow">
    if</span><span class="operator">(</span>x<span class="operator">&gt;=</span><span class="int">0</span><span class="operator"> &amp;&amp;</span> y<span class="operator">&gt;=</span><span class="int">0</span><span class="operator"> &amp;&amp;</span> x<span class="operator">&lt;</span>width<span class="operator"> &amp;&amp;</span> y<span class="operator">&lt;</span>height<span class="operator">)</span><span class="flow">
        return</span><span class="bool"> true</span><span class="operator">;</span><span class="comment"> // pertence
</span><span class="flow">    else</span><span class="comment">//Não pertence
</span><span class="flow">        return</span><span class="bool"> false</span><span class="operator">;
}</span><span class="type">

int</span><span class="keyword"> main</span><span class="operator">(</span><span class="type">int</span><span class="operator">,</span><span class="type"> char</span><span class="operator">**){</span>
    Mat image<span class="operator">,</span> negativeImage<span class="operator">;</span><span class="type">
    int</span> x1<span class="operator">,</span> y1<span class="operator">,</span> width<span class="operator">,</span> height<span class="operator">;</span><span class="type">
    bool</span> pertence<span class="operator">;</span>
    CvPoint p1<span class="operator">,</span> p2<span class="operator">;</span>

    image<span class="operator">=</span> imread<span class="operator">(</span><span class="string">"../images/pingo.png"</span><span class="operator">,</span>CV_LOAD_IMAGE_GRAYSCALE<span class="operator">);</span>
    width<span class="operator"> =</span> image<span class="operator">.</span>size<span class="operator">().</span>width<span class="operator">;</span>
    height<span class="operator"> =</span> image<span class="operator">.</span>size<span class="operator">().</span>height<span class="operator">;</span><span class="flow">

    if</span><span class="operator">(!</span>image<span class="operator">.</span>data<span class="operator">) {</span>
        cout<span class="operator"> &lt;&lt;</span><span class="string"> "nao abriu pingo.png"</span><span class="operator"> &lt;&lt;</span> endl<span class="operator">;</span><span class="flow">
        return</span><span class="int"> 0</span><span class="operator">;
    }</span>

    cout<span class="operator">&lt;&lt;</span><span class="string">"Informe P1: "</span><span class="operator">;</span>
    cin<span class="operator"> &gt;&gt;</span> x1<span class="operator"> &gt;&gt;</span> y1<span class="operator">;</span>

    pertence<span class="operator"> =</span> confere<span class="operator">(</span>width<span class="operator">,</span>height<span class="operator">,</span>x1<span class="operator">,</span>y1<span class="operator">);</span><span class="flow">

    if</span><span class="operator">(</span>pertence<span class="operator">) {</span>
        p1<span class="operator">.</span>x<span class="operator"> =</span> x1<span class="operator">;</span>
        p1<span class="operator">.</span>y<span class="operator"> =</span> y1<span class="operator">;
    }</span><span class="flow"> else</span><span class="operator"> {</span>
        cout<span class="operator"> &lt;&lt;</span><span class="string"> "A coordenada não pertence à imagem!"</span><span class="operator">&lt;&lt;</span> endl<span class="operator">;</span><span class="flow">
        return</span><span class="int"> 0</span><span class="operator">;
    }</span>

    cout<span class="operator">&lt;&lt;</span>endl<span class="operator">&lt;&lt;</span><span class="string">"Informe P2: "</span><span class="operator">;</span>
    cin<span class="operator"> &gt;&gt;</span> x1<span class="operator"> &gt;&gt;</span> y1<span class="operator">;</span>
    cout<span class="operator">&lt;&lt;</span>endl<span class="operator">;</span>

    pertence<span class="operator"> =</span> confere<span class="operator">(</span>width<span class="operator">,</span>height<span class="operator">,</span>x1<span class="operator">,</span>y1<span class="operator">);</span><span class="flow">

    if</span><span class="operator">(</span>pertence<span class="operator">) {</span>
        p2<span class="operator">.</span>x<span class="operator"> =</span> x1<span class="operator">;</span>
        p2<span class="operator">.</span>y<span class="operator"> =</span> y1<span class="operator">;
    }</span><span class="flow"> else</span><span class="operator"> {</span>
        cout<span class="operator"> &lt;&lt;</span><span class="string"> "A coordenada não pertence à imagem!"</span><span class="operator">&lt;&lt;</span> endl<span class="operator">;</span><span class="flow">
        return</span><span class="int"> 0</span><span class="operator">;
    }</span>

    imshow<span class="operator">(</span><span class="string">"janela1"</span><span class="operator">,</span> image<span class="operator">);</span><span class="flow">

    for</span><span class="operator">(</span><span class="type">int</span> i<span class="operator">=</span>p1<span class="operator">.</span>x<span class="operator">;</span>i<span class="operator">&lt;</span>p2<span class="operator">.</span>x<span class="operator">;</span>i<span class="operator">++) {</span><span class="flow">
        for</span><span class="operator"> (</span><span class="type">int</span> j<span class="operator"> =</span> p1<span class="operator">.</span>y<span class="operator">;</span> j<span class="operator">&lt;</span>p2<span class="operator">.</span>y<span class="operator">;</span> j<span class="operator">++)</span>
            image<span class="operator">.</span>at<span class="operator">&lt;</span>uchar<span class="operator">&gt;(</span>i<span class="operator">,</span> j<span class="operator">) =</span><span class="int"> 255</span><span class="operator"> -</span> image<span class="operator">.</span>at<span class="operator">&lt;</span>uchar<span class="operator">&gt;(</span>i<span class="operator">,</span> j<span class="operator">);

    }</span>

    imshow<span class="operator">(</span><span class="string">"janela2"</span><span class="operator">,</span> image<span class="operator">);</span>
    waitKey<span class="operator">();</span><span class="flow">

    return</span><span class="int"> 0</span><span class="operator">;
}</span></pre>